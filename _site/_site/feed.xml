<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="http://localhost:4000/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.3.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2017-01-19T12:17:39+08:00</updated><id>http://localhost:4000//</id><title type="html">luozhongâ€™s blog</title><subtitle>...
</subtitle><entry><title type="html">ç¤¾åŒºreact native iOS ç«¯å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</title><link href="http://localhost:4000/jekyll/update/2016/12/29/lovemoment.html" rel="alternate" type="text/html" title="ç¤¾åŒºreact native iOS ç«¯å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" /><published>2016-12-29T11:36:34+08:00</published><updated>2016-12-29T11:36:34+08:00</updated><id>http://localhost:4000/jekyll/update/2016/12/29/lovemoment</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2016/12/29/lovemoment.html">&lt;h3 id=&quot;ä¸€æ­å»ºç¯å¢ƒ&quot;&gt;ä¸€ã€æ­å»ºç¯å¢ƒ&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://reactnative.cn/&quot;&gt;å‚è€ƒåœ°å€-ä¸­æ–‡&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://facebook.github.io/react-native/&quot;&gt;å‚è€ƒåœ°å€-å®˜ç½‘&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;éœ€è¦èµ„æº&quot;&gt;éœ€è¦èµ„æº&lt;/h4&gt;

&lt;p&gt;ç¡¬ä»¶&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mac ç”µè„‘ ##### è½¯ä»¶

xcode 	
nodejs
Homebrew //Macç³»ç»Ÿçš„åŒ…ç®¡ç†å™¨ï¼Œç”¨äºå®‰è£…NodeJSå’Œä¸€äº›å…¶ä»–å¿…éœ€çš„å·¥å…·è½¯ä»¶ã€‚
Yarn	//React Nativeçš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆreact-native-cliï¼‰
Watchman	//ç”±Facebookæä¾›çš„ç›‘è§†æ–‡ä»¶ç³»ç»Ÿå˜æ›´çš„å·¥å…·ã€‚å®‰è£…æ­¤å·¥å…·å¯ä»¥æé«˜å¼€å‘æ—¶çš„æ€§èƒ½ï¼ˆpackagerå¯ä»¥å¿«é€Ÿæ•æ‰æ–‡ä»¶çš„å˜åŒ–ä»è€Œå®ç°å®æ—¶åˆ·æ–°ï¼‰ã€‚
Flow	//é™æ€çš„JSç±»å‹æ£€æŸ¥å·¥å…·
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;å®‰è£…ç¯å¢ƒ&quot;&gt;å®‰è£…ç¯å¢ƒ&lt;/h4&gt;

&lt;h5 id=&quot;å®‰è£…homebrew&quot;&gt;å®‰è£…Homebrew&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨Max OS X 10.11ï¼ˆEl Capitan)ç‰ˆæœ¬ä¸­ï¼Œhomebrewåœ¨å®‰è£…è½¯ä»¶æ—¶å¯èƒ½ä¼šç¢°åˆ°/usr/localç›®å½•ä¸å¯å†™çš„æƒé™é—®é¢˜ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä¿®å¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo chown -R `whoami` /usr/local
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h5 id=&quot;é…ç½®nodeæº&quot;&gt;é…ç½®nodeæº&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm config set registry https://registry.npm.taobao.org --global
npm config set disturl https://npm.taobao.org/dist --global
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h5 id=&quot;å®‰è£…yarn&quot;&gt;å®‰è£…Yarn&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install -g yarn react-native-cli
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœä½ çœ‹åˆ°&lt;code class=&quot;highlighter-rouge&quot;&gt;EACCES: permission denied&lt;/code&gt;è¿™æ ·çš„æƒé™æŠ¥é”™ï¼Œé‚£ä¹ˆè¯·å‚ç…§ä¸Šæ–‡çš„homebrewè¯‘æ³¨ï¼Œä¿®å¤/usr/localç›®å½•çš„æ‰€æœ‰æƒï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo chown -R `whoami` /usr/local
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h5 id=&quot;å®‰è£…xcode&quot;&gt;å®‰è£…xcode&lt;/h5&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/xcode/&quot;&gt;ä¸‹è½½xcode&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä¸‹è½½å®Œæˆåæ‰§è¡Œé»˜è®¤å®‰è£…å³å¯&lt;/p&gt;

&lt;h5 id=&quot;å®‰è£…watchman&quot;&gt;å®‰è£…Watchman&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install watchman
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h5 id=&quot;å®‰è£…flow&quot;&gt;å®‰è£…Flow&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install flow
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;äºŒæ–°å»ºå·¥ç¨‹&quot;&gt;äºŒã€æ–°å»ºå·¥ç¨‹&lt;/h3&gt;

&lt;p&gt;åœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸­è¾“å…¥å‘½ä»¤ï¼Œåˆæ¬¡æ‰§è¡Œæ­¤å‘½ä»¤æ—¶é—´ç¨é•¿&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;react-native init AwesomeProject //åˆå§‹åŒ–ä¸€ä¸ªåä¸º AwesomeProject çš„é¡¹ç›®
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;æ¨¡æ‹Ÿå™¨è¿è¡Œé¡¹ç›®&quot;&gt;æ¨¡æ‹Ÿå™¨è¿è¡Œé¡¹ç›®&lt;/h3&gt;

&lt;h5 id=&quot;å¯åŠ¨é¡¹ç›®ä¸¤ç§æ–¹å¼&quot;&gt;å¯åŠ¨é¡¹ç›®ï¼ˆä¸¤ç§æ–¹å¼ï¼‰&lt;/h5&gt;

&lt;p&gt;1ã€å‘½ä»¤å¯åŠ¨æ–¹å¼è¿›å…¥é¡¹ç›®ç›®å½•æ‰§è¡Œ  &lt;code class=&quot;highlighter-rouge&quot;&gt;react-native run-ios&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd AwesomeProject &amp;amp;&amp;amp; react-native run-ios
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2ã€xcodeå¯åŠ¨é¡¹ç›®&lt;/p&gt;

&lt;p&gt;åŒå‡»æ‰“å¼€å·¥ç¨‹ç›®å½•ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;ios/AwesomeProject.xcodeproj&lt;/code&gt;æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯iOSå·¥ç¨‹æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;åŠŸèƒ½ç®€ä»‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ğŸ”¨å›¾æ ‡è¡¨ç¤ºè¿è¡Œè®¾å¤‡ï¼Œæ¨¡æ‹Ÿå™¨æˆ–è€…çœŸæœºï¼Œéœ€è¦æ‰‹åŠ¨é€‰æ‹©ï¼ˆç›®å‰åªèƒ½é€‰æ‹©æ¨¡æ‹Ÿå™¨ï¼‰&lt;/li&gt;
  &lt;li&gt;å·¦ä¸Šè§’ä¸‰è§’å½¢&lt;code class=&quot;highlighter-rouge&quot;&gt;run&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;é»‘è‰²æ­£æ–¹å½¢ï¼šåœæ­¢run&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é€‰æ‹©ä¸€ä¸ªæ¨¡æ‹Ÿå™¨&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»é»‘è‰²ä¸‰è§’å½¢å³å¯è¿è¡Œé¡¹ç›®&lt;/p&gt;

&lt;image src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode1.jpeg&quot; /&gt;

&lt;h3 id=&quot;ä¸‰è°ƒè¯•&quot;&gt;ä¸‰ã€è°ƒè¯•&lt;/h3&gt;

&lt;p&gt;èšç„¦åˆ°æ¨¡æ‹Ÿå™¨ä¸Š&lt;/p&gt;

&lt;p&gt;é€‰æ‹©å·¦ä¸Šè§’ &lt;code class=&quot;highlighter-rouge&quot;&gt;Hardware/Shake Gesture&lt;/code&gt; æ­¤æ—¶ä¼šåœ¨æ¨¡æ‹Ÿå™¨ä¸Šå‘¼å‡ºè°ƒè¯•é¢æ¿&lt;/p&gt;

&lt;image src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode2.jpeg&quot; /&gt;

&lt;image width=&quot;300px&quot; src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode3.jpeg&quot; /&gt;

&lt;ul&gt;
  &lt;li&gt;ç‚¹å‡» &lt;strong&gt;Debug JS&lt;/strong&gt; æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ &lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:8081/debugger-ui&lt;/code&gt; é¡µé¢ï¼Œä»»ä½•åœ¨react antiveä¸­çš„consoleå³å¯åœ¨è¿™ä¸ªé¡µé¢çš„æ§åˆ¶å°å±•ç¤º&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Enable Live Reload&lt;/strong&gt; å¼€å¯è‡ªåŠ¨åˆ·æ–°é¡µé¢åŠŸèƒ½ï¼Œé¡¹ç›®ä¸­ä¿å­˜åé¡µé¢è‡ªåŠ¨åˆ·æ–°&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å››æ¨¡æ‹Ÿå™¨åŸºæœ¬æ“ä½œå¿«æ·é”®&quot;&gt;å››ã€æ¨¡æ‹Ÿå™¨åŸºæœ¬æ“ä½œå¿«æ·é”®&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cmd + r&lt;/code&gt;é”®åˆ·æ–°æ¨¡æ‹Ÿå™¨é¡µé¢&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cmd + shift + h&lt;/code&gt; å›åˆ°ä¸»é¡µï¼ˆç›¸å½“äºçœŸæœºæŒ‰ä¸‹homeé”®ï¼‰&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cmd + shift + h + h&lt;/code&gt; å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡ h ï¼ˆç›¸å½“äºåŒå‡»homeé”®ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;çœŸæœºè¿è¡Œ&quot;&gt;çœŸæœºè¿è¡Œ&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://idmsa.apple.com/IDMSWebAuth/login?appIdKey=891bd3417a7776362562d2197f89480a8547b108fd934911bcbea0110d07f757&amp;amp;path=%2Faccount%2F&amp;amp;rv=1&quot;&gt;æ³¨å†Œå¼€å‘è€…è´¦å·&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;åŒå‡»æ‰“å¼€å·¥ç¨‹ç›®å½•ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;ios/AwesomeProject.xcodeproj&lt;/code&gt;æ–‡ä»¶å¯åŠ¨xcode&lt;/li&gt;
  &lt;li&gt;å°†æ‰‹æœºè¿æ¥åˆ°ç”µè„‘ï¼Œå¹¶åœ¨æ‰‹æœºå¼¹æ¡†ä¸Šç‚¹å‡» &lt;strong&gt;ä¿¡ä»»&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;å•å‡»å·¦ä¾§æ å·¥ç¨‹åï¼Œæ‰“å¼€æ§åˆ¶é¢æ¿ï¼Œé€‰æ‹© &lt;code class=&quot;highlighter-rouge&quot;&gt;General&lt;/code&gt;ä¸‹çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Signing&lt;/code&gt;ï¼Œå‹¾é€‰&lt;code class=&quot;highlighter-rouge&quot;&gt;Autimatically manage signing&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;Team&lt;/code&gt; é€‰é¡¹ä¸­é€‰æ‹© &lt;code class=&quot;highlighter-rouge&quot;&gt;add an account&lt;/code&gt; æ·»åŠ è‡ªå·±çš„å¼€å‘è€…è´¦å·&lt;/li&gt;
&lt;/ul&gt;
&lt;image src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode4.jpeg&quot; /&gt;

&lt;ul&gt;
  &lt;li&gt;åœ¨å·¦ä¸Šè§’é»‘è‰²æ­£æ–¹å½¢æ—è¾¹çš„è®¾å¤‡ä¸­é€‰æ‹©è¿æ¥ç”µè„‘çš„iphoneåç§°ï¼Œä¸­é—´é¡¶éƒ¨çŠ¶æ€æ ä¼šå±•ç¤ºå½“å‰è®¾å¤‡å‡†å¤‡æƒ…å†µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;image src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode5.jpeg&quot; /&gt;

&lt;ul&gt;
  &lt;li&gt;å½“è®¾å¤‡å‡†å¤‡å°±ç»ªå ç‚¹å‡»é»‘è‰²ä¸‰è§’å½¢æˆ–è€…æŒ‰ä¸‹&lt;code class=&quot;highlighter-rouge&quot;&gt;cmd + r&lt;/code&gt;é”®è¿è¡Œç¨‹åºï¼Œéšåæ‰‹æœºä¸Šå³å¯å®‰è£…&lt;/li&gt;
  &lt;li&gt;å®‰è£…okåç‚¹å‡»å›¾æ ‡å¯åŠ¨appï¼Œå¦‚æœå¼¹å‡ºéœ€è¦ä¿¡ä»»è¯ä¹¦åˆ™è¿›å…¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;ç³»ç»Ÿè®¾ç½®-é€šç”¨-è®¾å¤‡ç®¡ç†&lt;/code&gt;ä¸­æ‰¾åˆ°ç›¸å…³è¯ä¹¦ï¼Œç‚¹å‡»éªŒè¯å³å¯*&lt;/li&gt;
  &lt;li&gt;è¿›å…¥appç•Œé¢åæ‘‡æ™ƒæ‰‹æœºå³å¯å‘¼å‡ºå¼€å‘è€…é¢æ¿ï¼Œå³å¯é€‰æ‹©&lt;strong&gt;è‡ªåŠ¨åˆ·æ–°&lt;/strong&gt;æˆ–è€… &lt;strong&gt;è°ƒè¯•æ¨¡å¼&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;æ¸©é¦¨æç¤ºï¼šæ‘‡æ™ƒæ‰‹æœºè®°å¾—æ‹¿ç¨³&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;äº”çœŸæœºè¿è¡Œ-åˆ‡æ¢è¿è¡Œæ¨¡å¼&quot;&gt;äº”ã€çœŸæœºè¿è¡Œ-åˆ‡æ¢è¿è¡Œæ¨¡å¼&lt;/h3&gt;

&lt;p&gt;è¿è¡Œæ¨¡å¼åˆ†ä¸º&lt;strong&gt;debug&lt;/strong&gt; å’Œ &lt;strong&gt;release&lt;/strong&gt; ä¸¤ç§&lt;/p&gt;

&lt;h5 id=&quot;debugå³ç¨‹åºè°ƒè¯•æ—¶å€™æ­¤æ—¶åº”ç”¨è¿è¡ŒåŸºäºæˆ‘ä»¬çš„æœªæ‰“åŒ…çš„jsæ–‡ä»¶å¯å®æ—¶ä¿®æ”¹é¢„è§ˆ&quot;&gt;debugå³ç¨‹åºè°ƒè¯•æ—¶å€™ï¼Œæ­¤æ—¶åº”ç”¨è¿è¡ŒåŸºäºæˆ‘ä»¬çš„æœªæ‰“åŒ…çš„jsæ–‡ä»¶ï¼Œå¯å®æ—¶ä¿®æ”¹é¢„è§ˆ&lt;/h5&gt;

&lt;h5 id=&quot;releaseå³å‘å¸ƒxcodeä¼šè‡ªåŠ¨æ‰“åŒ…jsæ–‡ä»¶&quot;&gt;releaseå³å‘å¸ƒï¼Œxcodeä¼šè‡ªåŠ¨æ‰“åŒ…jsæ–‡ä»¶&lt;/h5&gt;

&lt;p&gt;åŒæ—¶æŒ‰ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;cmd + shift + ,&lt;/code&gt;ä¸‰ä¸ªé”® å”¤èµ·è®¾ç½®ç•Œé¢&lt;/p&gt;

&lt;image src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode11.jpeg&quot; /&gt;

&lt;h4 id=&quot;çœŸæœºè°ƒè¯•æŠ¥é”™æƒ…å†µ&quot;&gt;çœŸæœºè°ƒè¯•æŠ¥é”™æƒ…å†µ&lt;/h4&gt;

&lt;h5 id=&quot;1-åœ¨è¿è¡Œreleaseæ¨¡å¼çš„æ—¶å€™-å‡ºç°å¦‚ä¸‹é”™è¯¯åˆ é™¤è¿™ä¸ªtestæ–‡ä»¶å†è¿è¡Œå³å¯&quot;&gt;1. åœ¨è¿è¡Œreleaseæ¨¡å¼çš„æ—¶å€™ å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œåˆ é™¤è¿™ä¸ªtestæ–‡ä»¶å†è¿è¡Œå³å¯&lt;/h5&gt;

&lt;image width=&quot;300px&quot; src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode8.jpeg&quot; /&gt;

&lt;h5 id=&quot;2-è¿è¡Œdebugæ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯éœ€è¦cleanåŒæ—¶æŒ‰ä¸‹-shift--cmd--k-å®Œæˆæ¸…é™¤&quot;&gt;2. è¿è¡Œdebugæ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼Œéœ€è¦cleanï¼ŒåŒæ—¶æŒ‰ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;shift + cmd + k&lt;/code&gt; å®Œæˆæ¸…é™¤&lt;/h5&gt;

&lt;image width=&quot;300px&quot; src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode12.jpeg&quot; /&gt;

&lt;h3 id=&quot;äº”ä¿®æ”¹iconappnameå’Œå¯åŠ¨ç”»é¢&quot;&gt;äº”ã€ä¿®æ”¹iconï¼Œappnameå’Œå¯åŠ¨ç”»é¢&lt;/h3&gt;

&lt;h4 id=&quot;ä¿®æ”¹icon&quot;&gt;ä¿®æ”¹icon&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;appstore æœç´¢ &lt;strong&gt;Prepo&lt;/strong&gt; ä¸‹è½½å®‰è£…&lt;/li&gt;
  &lt;li&gt;å¯åŠ¨&lt;strong&gt;Prepo&lt;/strong&gt; å°†éœ€è¦çš„å›¾æ ‡ï¼ˆä¸€å¼ åŸå›¾ï¼‰æ‹–æ”¾åˆ°è½¯ä»¶ä¸­å³å¯ç”Ÿæˆå…¨éƒ¨ç±»å‹çš„iconï¼Œå¯¼å‡ºå³å¯&lt;/li&gt;
  &lt;li&gt;xcodeä¸­æ‰“å¼€é¡¹ç›®&lt;/li&gt;
&lt;/ul&gt;
&lt;image width=&quot;100%&quot; src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode6.jpeg&quot; /&gt;

&lt;ul&gt;
  &lt;li&gt;å°†å¯¼å‡ºçš„iconæ‹–åˆ°å¯¹åº”çš„åœ°æ–¹ï¼Œ2xã€3xè¡¨ç¤ºå€æ•°ã€‚å¤§å°ä¸ºåƒç´ ï¼Œä¾‹å¦‚ç¬¬ä¸€ä¸ªå›¾æ ‡ä¸º 20x2=40åƒç´  çš„å›¾æ ‡&lt;/li&gt;
  &lt;li&gt;é‡æ–°è¿è¡Œé¡¹ç›®å³å¯çœ‹åˆ°å›¾æ ‡
â€¨&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ä¿®æ”¹appname&quot;&gt;ä¿®æ”¹appName&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;ä¿®æ”¹info.plistæ–‡ä»¶ï¼Œæ–°å»ºåä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;Bundle display name&lt;/code&gt; çš„keyï¼Œå€¼ä¸º appçš„åå­—ï¼Œè¿™ä¸ªå€¼åœ¨å‘å¸ƒ ipaåŒ…çš„æ—¶å€™éœ€è¦&lt;/li&gt;
  &lt;li&gt;ä¿®æ”¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;Bundle name&lt;/code&gt; å€¼ä¸º appçš„åå­—ï¼Œåœ¨çœŸæœºè¿è¡Œçš„æ—¶å€™éœ€è¦&lt;/li&gt;
&lt;/ul&gt;
&lt;image width=&quot;100%&quot; src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode7.jpeg&quot; /&gt;

&lt;ul&gt;
  &lt;li&gt;å†æ¬¡è¿è¡Œé¡¹ç›®å³å¯çœ‹åˆ°æ›´æ–°çš„åº”ç”¨å&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ä¿®æ”¹app-transport-security-settings&quot;&gt;ä¿®æ”¹App Transport Security Settings&lt;/h4&gt;

&lt;p&gt;æ·»åŠ æ–¹æ³•å‚è€ƒä¸Šæ–‡  &lt;strong&gt;&lt;em&gt;ä¿®æ”¹appName&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;iOS 10 æ·»åŠ äº†httpså®‰å…¨ç­–ç•¥ ä¸ºäº†ç»§ç»­ä½¿ç”¨ http éœ€è¦åšä»¥ä¸‹ä¿®æ”¹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;App Transport Security Settings æ·»åŠ  Allow Arbitrary Loads å¸ƒå°”å€¼ YES
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;image width=&quot;100%&quot; src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode9.jpeg&quot; /&gt;

&lt;h4 id=&quot;webviewè°ƒç”¨ç›¸æœºé—ªé€€&quot;&gt;WebViewè°ƒç”¨ç›¸æœºé—ªé€€&lt;/h4&gt;

&lt;p&gt;åœ¨info.plistæ–‡ä»¶ä¸‹æ·»åŠ å¦‚ä¸‹key&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ç›¸æœºæƒé™

&amp;lt;key&amp;gt;NSCameraUsageDescription&amp;lt;/key&amp;gt;

&amp;lt;string&amp;gt;cameraDesciption&amp;lt;/string&amp;gt;	 

ç›¸å†Œæƒé™

&amp;lt;key&amp;gt;NSPhotoLibraryUsageDescription&amp;lt;/key&amp;gt;

&amp;lt;string&amp;gt;photoLibraryDesciption&amp;lt;/string&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;image width=&quot;100%&quot; src=&quot;http://ois2zrmyi.bkt.clouddn.com/xcode10.jpeg&quot; /&gt;</content><summary type="html">ä¸€ã€æ­å»ºç¯å¢ƒ
å‚è€ƒåœ°å€-ä¸­æ–‡</summary></entry><entry><title type="html">react native iOS çƒ­æ›´æ–°ï¼ˆçœŸæœºè¿è¡Œï¼Œæ‰“åŒ…æ–‡ä»¶ï¼Œä¸Šä¼  ï¼‰</title><link href="http://localhost:4000/jekyll/update/2016/01/19/iOS-cudepush.html" rel="alternate" type="text/html" title="react native iOS çƒ­æ›´æ–°ï¼ˆçœŸæœºè¿è¡Œï¼Œæ‰“åŒ…æ–‡ä»¶ï¼Œä¸Šä¼  ï¼‰" /><published>2016-01-19T11:36:34+08:00</published><updated>2016-01-19T11:36:34+08:00</updated><id>http://localhost:4000/jekyll/update/2016/01/19/iOS-cudepush</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2016/01/19/iOS-cudepush.html">&lt;h3 id=&quot;æœ¬æ–‡ä½¿ç”¨çš„æ˜¯-å¾®è½¯codepush-cloud-æœåŠ¡&quot;&gt;æœ¬æ–‡ä½¿ç”¨çš„æ˜¯ å¾®è½¯codepush cloud æœåŠ¡ã€‚&lt;/h3&gt;

&lt;h3 id=&quot;çƒ­æ›´æ–°ç¯å¢ƒä»¥åŠæ’ä»¶çš„å®‰è£…&quot;&gt;çƒ­æ›´æ–°ç¯å¢ƒä»¥åŠæ’ä»¶çš„å®‰è£…&lt;/h3&gt;

&lt;h4 id=&quot;è¿™ä»½æ–‡æ¡£å»ºç«‹åœ¨å·²ç»èƒ½åœ¨iosæ¨¡æ‹Ÿå™¨ä¸Šæ­£å¸¸è¿è¡Œé¡¹ç›®çš„åŸºç¡€ä¸Š&quot;&gt;è¿™ä»½æ–‡æ¡£å»ºç«‹åœ¨å·²ç»èƒ½åœ¨iOSæ¨¡æ‹Ÿå™¨ä¸Šæ­£å¸¸è¿è¡Œé¡¹ç›®çš„åŸºç¡€ä¸Š&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://microsoft.github.io/code-push/docs/react-native.html#link-4&quot;&gt;å‚è€ƒæ–‡ç« 1-code-push&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;ä½¿ç”¨codepushåšçƒ­æ›´æ–°&quot;&gt;ä½¿ç”¨codepushåšçƒ­æ›´æ–°&lt;/h4&gt;

&lt;h4 id=&quot;è¿è¡Œç¯å¢ƒ&quot;&gt;è¿è¡Œç¯å¢ƒ&lt;/h4&gt;

&lt;p&gt;macOS Sierra 10.12.1&lt;/p&gt;

&lt;p&gt;iOS10&lt;/p&gt;

&lt;p&gt;xcode Version 8.1 (8B62)&lt;/p&gt;

&lt;h4 id=&quot;codepushç®€ä»‹&quot;&gt;CodePushç®€ä»‹&lt;/h4&gt;

&lt;p&gt;CodePush æ˜¯å¾®è½¯æä¾›çš„ä¸€å¥—ç”¨äºçƒ­æ›´æ–° React Native å’Œ Cordova åº”ç”¨çš„æœåŠ¡ã€‚
CodePush æ˜¯æä¾›ç»™ React Native å’Œ Cordova å¼€å‘è€…ç›´æ¥éƒ¨ç½²ç§»åŠ¨åº”ç”¨æ›´æ–°ç»™ç”¨æˆ·è®¾å¤‡çš„äº‘æœåŠ¡ã€‚CodePush ä½œä¸ºä¸€ä¸ªä¸­å¤®ä»“åº“ï¼Œå¼€å‘è€…å¯ä»¥æ¨é€æ›´æ–° (JS, HTML, CSS and images)ï¼Œåº”ç”¨å¯ä»¥ä»å®¢æˆ·ç«¯ SDK é‡Œé¢æŸ¥è¯¢æ›´æ–°ã€‚CodePush å¯ä»¥è®©åº”ç”¨æœ‰æ›´å¤šçš„å¯ç¡®å®šæ€§ï¼Œä¹Ÿå¯ä»¥è®©ä½ ç›´æ¥æ¥è§¦ç”¨æˆ·ç¾¤ã€‚åœ¨ä¿®å¤ä¸€äº›å°é—®é¢˜å’Œæ·»åŠ æ–°ç‰¹æ€§çš„æ—¶å€™ï¼Œä¸éœ€è¦ç»è¿‡äºŒè¿›åˆ¶æ‰“åŒ…ï¼Œå¯ä»¥ç›´æ¥æ¨é€ä»£ç è¿›è¡Œå®æ—¶æ›´æ–°ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å®‰è£…ä¸æ³¨å†Œcodepush&quot;&gt;å®‰è£…ä¸æ³¨å†ŒCodePush&lt;/h4&gt;

&lt;p&gt;ä½¿ç”¨CodePushä¹‹å‰é¦–å…ˆè¦å®‰è£…CodePushå®¢æˆ·ç«¯ï¼Œæˆ‘çš„æœºå™¨æ˜¯OS Sierra 10.12.1&lt;/p&gt;

&lt;p&gt;æ¶‰åŠåˆ°çš„æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install -g code-push-cli //å®‰è£…codepushå®¢æˆ·ç«¯

code-push register	//æ³¨å†Œcodepushè´¦å·

code-push login	//ç™»å½•

code-push loout	//æ³¨é”€

code-push access-key ls		//åˆ—å‡ºç™»é™†çš„token

code-push access-key rm &amp;lt;accessKye&amp;gt;	//åˆ é™¤æŸä¸ª access-key
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç®¡ç† CodePush è´¦å·éœ€è¦é€šè¿‡ NodeJS-based CLIï¼Œå¦‚æœæœªå®‰è£…åˆ™å¯ä»¥è¾“å…¥&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install -g code-push-cli	//-gè¡¨ç¤ºå…¨å±€å®‰è£…
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ‘çš„ç‰ˆæœ¬æ˜¯&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/codepus.jpeg&quot; /&gt;

&lt;h4 id=&quot;åˆ›å»ºä¸€ä¸ªcodepush-è´¦å·&quot;&gt;åˆ›å»ºä¸€ä¸ªCodePush è´¦å·&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push register
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€æ³¨å†Œé¡µé¢ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯gitè´¦å·æˆæƒçš„ã€‚&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/reg.png&quot; /&gt;

&lt;p&gt;æˆæƒé€šè¿‡ä¹‹åï¼ŒCodePushä¼šå±•ç¤ºâ€œaccess keyâ€ï¼Œå¤åˆ¶æ­¤keyåˆ°ç»ˆç«¯å³å¯å®Œæˆæ³¨å†Œã€‚&lt;/p&gt;

&lt;p&gt;ç™»å½•ï¼Œç™»é™†æˆåŠŸåï¼Œsessionæ–‡ä»¶å°†ä¼šå†™åœ¨ /Users/ä½ çš„ç”¨æˆ·å/.code-push.config ä¸­&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push login
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è‡³æ­¤ codepushå®¢æˆ·ç«¯ç›¸å…³å·¥ä½œå®Œæˆ&lt;/p&gt;

&lt;h4 id=&quot;åœ¨codepushæœåŠ¡å™¨æ³¨å†Œappé¡¹ç›®&quot;&gt;åœ¨CodePushæœåŠ¡å™¨æ³¨å†Œappï¼ˆé¡¹ç›®ï¼‰&lt;/h4&gt;

&lt;p&gt;æ¶‰åŠç›¸å…³å‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push app add &amp;lt;appName&amp;gt; //åœ¨è´¦å·é‡Œé¢æ·»åŠ ä¸€ä¸ªæ–°çš„app

code-push app rm &amp;lt;appName&amp;gt;	åœ¨è´¦å·é‡Œç§»é™¤ä¸€ä¸ªapp

code-push app rename &amp;lt;appName&amp;gt; //é‡å‘½åä¸€ä¸ªå­˜åœ¨app

code-push app ls //åˆ—å‡ºè´¦å·ä¸‹é¢çš„æ‰€æœ‰app

code-push app transfer //æŠŠappçš„æ‰€æœ‰æƒè½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªè´¦å·
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸ºäº†è®©codepushå…³è”ä¸Šæˆ‘ä»¬éœ€è¦çƒ­æ›´çš„app  åˆ™éœ€è¦å‘codepushæ³¨å†Œç›®æ ‡ appï¼Œæˆ‘çš„appåå­—æ˜¯Tripï¼Œè¯·è‡ªè¡Œå¯¹åº”è‡ªå·±çš„appåç§°&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push app add Trip
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;é›†æˆcodepush-sdk-åˆ°-iosé¡¹ç›®ä¸­ç›®å‰æˆ‘åªåšäº†iosç‰ˆ&quot;&gt;é›†æˆCodePush SDK åˆ° iOSé¡¹ç›®ä¸­ï¼ˆç›®å‰æˆ‘åªåšäº†iOSç‰ˆï¼‰&lt;/h4&gt;

&lt;h5 id=&quot;å®‰è£…codepushæ’ä»¶åˆ°é¡¹ç›®ä¸­&quot;&gt;å®‰è£…CodePushæ’ä»¶åˆ°é¡¹ç›®ä¸­&lt;/h5&gt;

&lt;p&gt;æˆ‘çš„é¡¹ç›®ç›®å½•ç»“æ„æ˜¯&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/mulu.jpg&quot; /&gt;

&lt;p&gt;åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡ŒæŒ‡ä»¤ï¼Œæ­¤æ—¶ä¼šåœ¨node_modulesæ–‡ä»¶å¤¹ä¸­ç”Ÿæˆreact-native-code-pushæ–‡ä»¶å¤¹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install --save react-native-code-push
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h5 id=&quot;ä½¿ç”¨cocoapodså¯¼å…¥code-pushåˆ°iosé¡¹ç›®ä¸­-å‚è€ƒæ–‡æ¡£&quot;&gt;ä½¿ç”¨cocoapodså¯¼å…¥code-pushåˆ°iOSé¡¹ç›®ä¸­ &lt;a href=&quot;https://microsoft.github.io/code-push/docs/react-native.html#link-4&quot;&gt;å‚è€ƒæ–‡æ¡£&lt;/a&gt;&lt;/h5&gt;

&lt;p&gt;cocoapodsï¼šç®€å•ç†è§£ä¸€ä¸ªiOSçš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œæœ‰ç‚¹ç±»ä¼¼å‰ç«¯çš„ &lt;a href=&quot;https://bower.io/&quot;&gt;bower&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&quot;é¦–å…ˆå®‰è£…cocoapods&quot;&gt;é¦–å…ˆå®‰è£…cocoapods&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo gem install cocoapods

å¦‚æœæŠ¥é”™

ERROR:  While executing gem ... (Gem::DependencyError)
Unable to resolve dependencies: cocoapods requires cocoapods-core (= 1.1.1), cocoapods-downloader (&amp;lt; 2.0, &amp;gt;= 1.1.2), cocoapods-trunk (&amp;lt; 2.0, &amp;gt;= 1.1.1), xcodeproj (&amp;lt; 2.0, &amp;gt;= 1.3.3)

å°è¯•è¿è¡Œ

sudo gem install cocoapods --pre 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨é¡¹ç›®&lt;code class=&quot;highlighter-rouge&quot;&gt;ios&lt;/code&gt;æ–‡ä»¶å¤¹ä¸­æ–°å»º&lt;code class=&quot;highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œ&lt;a href=&quot;https://guides.cocoapods.org/contributing/contribute-to-cocoapods.html&quot;&gt;å‚è€ƒæ–‡æ¡£&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;platform :ios, '8.0'

target 'Trip' do	//appåå­—è‡ªè¡Œä¿®æ”¹
    pod 'CodePush', :path =&amp;gt; '../node_modules/react-native-code-push'//è·¯å¾„æ ¹æ®è‡ªå·±çš„æ–‡ä»¶ç›®å½•ä¿®æ”¹
end
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;é¡¹ç›®&lt;code class=&quot;highlighter-rouge&quot;&gt;Podfile &lt;/code&gt;åŒçº§ç›®å½•ä¸‹è¿è¡ŒæŒ‡ä»¤ï¼Œå³å¯å°†codepushæ’ä»¶é›†æˆåˆ°é¡¹ç›®&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pod install
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨xcodeä¸­æ‰“å¼€é¡¹ç›®&lt;/p&gt;

&lt;p&gt;é¡¹ç›®ç›®å½•ä¸‹æœ‰ &lt;em&gt;iOS&lt;/em&gt; æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå« &lt;em&gt;xxxx.xcodeproj&lt;/em&gt; çš„æ–‡ä»¶ ç‚¹å‡»å°±å¯ç”¨xcodeæ‰“å¼€ï¼Œæ‰“å¼€åæˆ‘çš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode1.jpg&quot; /&gt;

&lt;p&gt;åœ¨æ–‡ä»¶å¤¹ä¸­æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°/node_modules/react-native-code-push/ios/CodePush.xcodeproj  è¿™ä¸ªæ–‡ä»¶&lt;/p&gt;

&lt;p&gt;å°†ä»–æ‹–åˆ°xcodeé¡¹ç›®ä¸­çš„Librariesæ–‡ä»¶å¤¹ä¸­&lt;/p&gt;

&lt;p&gt;ç›®çš„æ˜¯ä¸ºäº†å°†codepushé›†æˆåˆ°iOSé¡¹ç›®ä¸­ä½¿ç”¨ç›¸å…³åŠŸèƒ½&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode2.jpeg&quot; /&gt;

&lt;p&gt;åœ¨xcodeä¸­ ç‚¹å‡»è“è‰²çš„é¡¹ç›®åç§°å‘¼å‡ºä¸­é—´çš„æ“ä½œæ ï¼Œç‚¹å‡»æ“ä½œæ ä¸Šé¢çš„ &lt;strong&gt;&lt;em&gt;build phases&lt;/em&gt;&lt;/strong&gt; æ  æ‰“å¼€&lt;strong&gt;&lt;em&gt;Link Binary With Libraries&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å°† &lt;code class=&quot;highlighter-rouge&quot;&gt;Libraries/CodePush.xcodeproj/Products&lt;/code&gt; ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;libCodePush.a&lt;/code&gt;æ–‡ä»¶æ‹–å…¥&lt;code class=&quot;highlighter-rouge&quot;&gt;Link Binary With Libraries&lt;/code&gt;ä¸­&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode3.jpeg&quot; /&gt;

&lt;p&gt;ç‚¹å‡»&lt;strong&gt;&lt;em&gt;Link Binary With Libraries&lt;/em&gt;&lt;/strong&gt;çš„åŠ å·ï¼Œé€‰æ‹© &lt;strong&gt;&lt;em&gt;libz.tbd&lt;/em&gt;&lt;/strong&gt; æ·»åŠ è¿›å»ï¼Œæ·»åŠ ä¸Šäº†ï¼ŒiOSç¼–è¯‘å‡ºæ¥çš„åŒ…ä¸­å°±ä¼šåŒ…å«è¿™äº›åº“ã€‚&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode4.jpeg&quot; /&gt;

&lt;p&gt;é€‰æ‹©æ“ä½œæ ä¸Šéƒ¨ &lt;strong&gt;&lt;em&gt;Build Settings&lt;/em&gt;&lt;/strong&gt; æ ç›® åœ¨&lt;strong&gt;&lt;em&gt;Header Search Paths&lt;/em&gt;&lt;/strong&gt;é‚£ä¸€é¡¹ä¸­åŠ å…¥&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$(SRCROOT)/../node_modules/react-native-code-push
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¹¶ä¸”è¿™ä¸€é¡¹çš„åé¢å¿…é¡»é€‰æ‹© &lt;strong&gt;&lt;em&gt;recursive&lt;/em&gt;&lt;/strong&gt;  ï¼ˆç”¨åŠ›æ•²é»‘æ¿ï¼‰ï¼Œè¿™æ˜¯è®©iOSçŸ¥é“å»é€’å½’æŸ¥æ‰¾æ­¤ä¾èµ– å¦åˆ™æœ‰å¯èƒ½æ‰¾ä¸åˆ°&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode5.jpeg&quot; /&gt;

&lt;p&gt;####ä»£ç ä¸­é…ç½®CodePushæ’ä»¶&lt;/p&gt;

&lt;p&gt;æ‰“å¼€xcode åœ¨é¡¹ç›®ä¸­æ‰¾åˆ° &lt;strong&gt;&lt;em&gt;AppDelegate.m&lt;/em&gt;&lt;/strong&gt;æ–‡ä»¶ï¼Œå¹¶å•å‡»å·¦é”®æ‰“å¼€ ï¼Œä¸€èˆ¬åœ¨é¡¹ç›®åæ–‡ä»¶å¤¹ä¸­ æ‰¾ä¸åˆ°å°±ä»”ç»†ç‚¹æ‰¾&lt;/p&gt;

&lt;p&gt;åœ¨ä»£ç å¤´éƒ¨åŠ å…¥ä»£ç å¹¶&lt;code class=&quot;highlighter-rouge&quot;&gt;cmd + s&lt;/code&gt;ä¿å­˜ï¼Œå¦‚æœåŠ å…¥åæŠ¥é”™ï¼Œåˆ™å¯¹ç…§ä¸Šé¢çš„æ­¥éª¤ä»”ç»†æ£€æŸ¥æ˜¯å¦ç–æ¼äº†ï¼Œæ‰¾ä¸åˆ°æ­¤æ–‡ä»¶è¡¨æ˜å‰é¢çš„ä¾èµ–å¼•å…¥æ²¡æœ‰æˆåŠŸ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#import &quot;CodePush.h&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç»§ç»­åœ¨æ­¤æ–‡ä»¶ä¸­æ‰¾åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;jsCodeLocation &lt;/code&gt; å…³é”®è¯ï¼Œå°†æºç æ›¿æ¢æˆä»¥ä¸‹ä»£ç &lt;/p&gt;

&lt;p&gt;PSï¼šè®©iOSåˆ¤æ–­æ˜¯å¦æ˜¯debug å’Œ releaseæ¨¡å¼ å¯¹åº”åŠ è½½ä¸åŒçš„å…¥å£æ–‡ä»¶ã€‚æˆ‘ä»¬çƒ­æ›´æ—¶éœ€è¦ä»¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;release&lt;/code&gt;æ–¹å¼è¿è¡Œ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#ifdef DEBUG
    jsCodeLocation = [NSURL URLWithString:@&quot;http://localhost:8081/index.ios.bundle?	platform=ios&amp;amp;dev=true&quot;];
#else
    jsCodeLocation = [CodePush bundleURL];
#endif
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¯åŠ¨å‘½ä»¤çª—å£è¾“å…¥å‘½ä»¤è·å– &lt;code class=&quot;highlighter-rouge&quot;&gt;Staging &lt;/code&gt; keyï¼Œå¤åˆ¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;Staging &lt;/code&gt; çš„å€¼ï¼ˆå› ä¸ºæ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒ æ‰€ä»¥ä½¿ç”¨ &lt;strong&gt;&lt;em&gt;Staging&lt;/em&gt;&lt;/strong&gt;ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push deployment ls  &amp;lt;AppName&amp;gt; --displayKeys
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/codepush1.jpeg&quot; /&gt;

&lt;p&gt;æ‰“å¼€xcode å°†æ­¤å€¼å¡«å…¥ &lt;strong&gt;&lt;em&gt;info.plist&lt;/em&gt;&lt;/strong&gt;æ–‡ä»¶ä¸­&lt;/p&gt;

&lt;p&gt;æ·»åŠ  &lt;strong&gt;&lt;em&gt;CodePushDeploymentKey&lt;/em&gt;&lt;/strong&gt; é”®&lt;/p&gt;

&lt;p&gt;å°† &lt;strong&gt;&lt;em&gt;Bundle versions string, short&lt;/em&gt;&lt;/strong&gt; å€¼æ”¹æˆ &lt;strong&gt;&lt;em&gt;1.0.0&lt;/em&gt;&lt;/strong&gt; å› ä¸ºiOSä¸­codepushåªæ”¯æŒè¿™æ ·çš„æ ¼å¼&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode6.jpeg&quot; /&gt;

&lt;p&gt;xcodeä¸­ç‚¹å‡»é¡¹ç›®å è°ƒå‡ºä¸­é—´çš„æ“ä½œæ  ç‚¹å‡» &lt;strong&gt;&lt;em&gt;general&lt;/em&gt;&lt;/strong&gt; å¦‚æœä¸‹é¢çš„ &lt;strong&gt;&lt;em&gt;build&lt;/em&gt;&lt;/strong&gt; å€¼ä¸ºç©º  åˆ™æ”¹ä¸º1 ï¼ˆæˆ‘è¿™é‡Œæ˜¯1 è‡ªå·±å¯¹åº”è‡ªå·±çš„é¡¹ç›®ï¼‰&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode7.jpeg&quot; /&gt;

&lt;p&gt;####react native ä¸­ä½¿ç”¨æ’ä»¶&lt;/p&gt;

&lt;p&gt;æ‰“å¼€iOSçš„å…¥å£æ–‡ä»¶ æˆ‘è¿™é‡Œæ˜¯ &lt;strong&gt;&lt;em&gt;index.ios.js&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ä»£ç ä¸­å¼•å…¥æ’ä»¶&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import codePush from &quot;react-native-code-push&quot;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨ çˆ¶ç»„ä»¶çš„ &lt;strong&gt;&lt;em&gt;componentDidMount&lt;/em&gt;&lt;/strong&gt; æ–¹æ³•ä¸­è°ƒç”¨çƒ­æ›´æ–°æ–¹æ³•&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;componentDidMount(){
	codePush.sync();
  	} ***ä»¥ä¸Šå°±å®Œæˆäº†åŸºæœ¬çš„é…ç½®***
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;###react native æ‰“åŒ…&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/facebook/react-native/blob/master/local-cli/bundle/bundleCommandLineArgs.js&quot;&gt;ç›¸å…³å‘½ä»¤&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;react-native bundle
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¸¸ç”¨å‚æ•°è§£é‡Š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;--entry-file //iosæˆ–androidå…¥å£çš„æ–‡ä»¶åç§°ï¼Œä¸€èˆ¬å« index.ios.jsæˆ– index.android.js

--platform //å¹³å°åç§°(ios/android)

--dev //è®¾ç½®ä¸ºfalseçš„æ—¶å€™ä¼šå¯¹JavaScriptä»£ç è¿›è¡Œä¼˜åŒ–å¤„ç†ã€‚

--bundle-output //ç”Ÿæˆçš„jsbundleæ–‡ä»¶çš„åç§°(åŒ…å«è·¯å¾„)ï¼Œæ¯”å¦‚./ios/bundle/index.ios.jsbundle

--assets-dest //å›¾ç‰‡ä»¥åŠå…¶ä»–èµ„æºå­˜æ”¾çš„ç›®å½•,æ¯”å¦‚./ios/assets
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ‘çš„æ‰“åŒ…å‘½ä»¤å¦‚ä¸‹ï¼Œæˆ‘çš„é™æ€èµ„æºæ”¾åˆ° ios/Trip/assets ä¸­çš„ï¼ˆä¾ç…§ä¸ªäººçš„è·¯å¾„ä¸ºå‡†ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;ç‰¹åˆ«æ³¨æ„ï¼šbundle æ–‡ä»¶å¤¹ éœ€è¦äº‹å…ˆæ‰‹åŠ¨å»ºå¥½&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;react-native bundle --entry-file index.ios.js --platform ios --dev false --bundle-output ./ios/bundle/index.ios.jsbundle --assets-dest ./ios/Trip/assets
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ­¤æ—¶æˆåŠŸä¼šåœ¨&lt;strong&gt;&lt;em&gt;ios&lt;/em&gt;&lt;/strong&gt;ç›®å½•ä¸‹çœ‹åˆ°ä¸€ä¸ª&lt;strong&gt;&lt;em&gt;bundle&lt;/em&gt;&lt;/strong&gt;ç›®å½•ï¼Œé‡Œé¢æ˜¯æˆ‘ä»¬çš„æ‰“åŒ…æ–‡ä»¶&lt;/p&gt;

&lt;p&gt;æ‰“å¼€xcode ï¼Œé€‰ä¸­é¡¹ç›®ä¸­å’Œé¡¹ç›®åä¸€æ ·çš„é»„è‰²æ–‡ä»¶å¤¹ï¼Œå³é”®é€‰æ‹©&lt;strong&gt;&lt;em&gt;Add Files to â€œRNIosâ€&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ‰¾åˆ°æˆ‘ä»¬çš„&lt;strong&gt;&lt;em&gt;bundle&lt;/em&gt;&lt;/strong&gt;ï¼Œæ³¨æ„æ˜¯æ–‡ä»¶å¤¹ï¼Œä¸æ˜¯æ–‡ä»¶ï¼Œç„¶åä¸è¦çŒ´æ€¥çŒ´æ€¥çš„ç‚¹addæŒ‰é’®ï¼Œè¯·çœ‹ä¸‹ä¸€æ­¥&lt;/p&gt;

&lt;p&gt;åœ¨&lt;strong&gt;&lt;em&gt;option&lt;/em&gt;&lt;/strong&gt;ä¸­é€‰æ‹©&lt;strong&gt;&lt;em&gt;Create folder references&lt;/em&gt;&lt;/strong&gt; ç„¶åç‚¹å‡» add&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode11.jpeg&quot; /&gt;

&lt;p&gt;å®Œæˆåå³å¯è¿›è¡Œä¸‹ä¸€æ­¥çš„çœŸæœºå®‰è£…äº†&lt;/p&gt;

&lt;h3 id=&quot;iosçœŸæœºæµ‹è¯•çƒ­æ›´æ–°&quot;&gt;iOSçœŸæœºæµ‹è¯•çƒ­æ›´æ–°&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆéœ€è¦åœ¨apple&lt;a href=&quot;https://developer.apple.com/&quot;&gt;å¼€å‘è€…ç½‘ç«™&lt;/a&gt;å»æ³¨å†Œå¼€å‘è€…è´¦å·ï¼ˆä¸ªäººæµ‹è¯•å¯ä»¥ä¸äº¤99çš„ä¿æŠ¤è´¹ï¼‰&lt;/p&gt;

&lt;p&gt;xcode ä¸­æ‰“å¼€é¡¹ç›®ï¼ˆå‚è€ƒä¸Šæ–‡å¦‚ä½•æ‰“å¼€é¡¹ç›®ï¼‰&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»é¡¹ç›®ï¼Œåœ¨æ“ä½œæ ä¸­é€‰æ‹©&lt;strong&gt;* general&lt;/strong&gt;* åœ¨teamä¸­é€‰æ‹©è‡ªå·±çš„å¼€å‘è€…è´¦æˆ·&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode8.jpeg&quot; /&gt;

&lt;p&gt;æŒ‰ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;cmd+shift+,&lt;/code&gt;é”®æ‰“å¼€é…ç½®çª—å£ï¼Œåœ¨&lt;strong&gt;&lt;em&gt;build configration&lt;/em&gt;&lt;/strong&gt; ä¸­å¯ä»¥é€‰æ‹©é¡¹ç›®è¿è¡Œæ–¹å¼ï¼ˆdebug/releaseï¼‰&lt;/p&gt;

&lt;p&gt;debugï¼šçœŸæœºè°ƒè¯•ç”¨ï¼Œå½“ä¿®æ”¹ä»£ç åå¯ä»¥åœ¨çœŸæœºä¸Šæ—¶æ—¶çœ‹åˆ°æ•ˆæœ&lt;/p&gt;

&lt;p&gt;releaeï¼šä½¿ç”¨ä¸Šæ–‡æŒ‡å®šçš„bundleæ–‡ä»¶è¿è¡Œï¼Œç­‰äºä¸æœ¬åœ°ä»£ç æ—¶æ—¶ä¿®æ”¹æ²¡æœ‰å…³ç³»äº†ï¼ˆçƒ­æ›´æ–°éœ€è¦ä½¿ç”¨è¿™ä¸ªæ¨¡å¼è°ƒè¯•ï¼‰&lt;/p&gt;

&lt;p&gt;å°†æ‰‹æœºæ’ä¸Š &lt;strong&gt;&lt;em&gt;usb&lt;/em&gt;&lt;/strong&gt; é“¾æ¥ &lt;strong&gt;&lt;em&gt;mac&lt;/em&gt;&lt;/strong&gt;ï¼Œç‚¹å‡»å·¦ä¸Šè§’æ‰‹æœºå›¾æ ‡ï¼Œå³å¯çœ‹åˆ°æˆ‘ä»¬çš„çœŸæœºæœºå™¨åï¼Œé€‰æ‹©å®ƒï¼Œç„¶åç‚¹å‡»å·¦è¾¹çš„ä¸‰è§’å½¢æŒ‰é’®è¿è¡Œé¡¹ç›®ã€‚&lt;/p&gt;

&lt;p&gt;åç­‰å‡ åˆ†é’Ÿï¼Œä¸å‡ºæ„å¤–çš„è¯å³å¯åœ¨æ‰‹æœºä¸Šå®‰è£…app ï¼ŒæˆåŠŸæˆ–å¤±è´¥ xcodeä¼šå¼¹å‡ºæç¤ºã€‚&lt;/p&gt;

&lt;image src=&quot;http://ok0dwebt7.bkt.clouddn.com/xcode10.jpeg&quot; /&gt;

&lt;p&gt;ä¸Šè¿°æ“ä½œæˆåŠŸåœ¨æ‰‹æœºä¸Šå®‰è£…appåï¼Œå°±å¯ä»¥ç»§ç»­ä¸‹é¢çš„æ‰“åŒ…å‘å¸ƒäº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ‰“åŒ…-bundle-æ–‡ä»¶&quot;&gt;æ‰“åŒ… bundle æ–‡ä»¶&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;react-native bundle --entry-file index.ios.js --platform ios --dev false --bundle-output ./ios/bundle/index.ios.jsbundle --assets-dest ./ios/Trip/assets
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;å‘codepushå‘å¸ƒæ‰“åŒ…ä»£ç &quot;&gt;å‘codepushå‘å¸ƒæ‰“åŒ…ä»£ç &lt;/h3&gt;

&lt;p&gt;éšæ„ä¿®æ”¹ä»£ç ï¼Œä½¿å…¶è¡¨ç°å’Œæ‰‹æœºä¸Šæ˜¾ç¤ºä¸ä¸€è‡´å³å¯&lt;/p&gt;

&lt;p&gt;ç„¶åé‡æ–°æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„bundleæ–‡ä»¶&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œcodepushçš„å‘å¸ƒå‘½ä»¤ï¼Œå°†æ–°æ–‡ä»¶å‘å¸ƒåˆ°&lt;strong&gt;&lt;em&gt;staging&lt;/em&gt;&lt;/strong&gt; ç¯å¢ƒä¸­&lt;/p&gt;

&lt;p&gt;ç›¸å…³å‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push release &amp;lt;appName&amp;gt; &amp;lt;updateContents&amp;gt; &amp;lt;targetBinaryVersion&amp;gt; --mandatory //å‘å¸ƒ

code-push deployment history Trip Staging  //æŸ¥è¯¢å‘å¸ƒå†å²
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å‚æ•°è§£é‡Š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;appName&amp;gt; //appåç§°

&amp;lt;updateContents&amp;gt; //Bundleæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼ˆå®Œæ•´ï¼‰

&amp;lt;targetBinaryVersion&amp;gt;	// éœ€è¦çƒ­æ›´çš„app ç‰ˆæœ¬

--mandatory //æ­¤å‚æ•°éå¿…é¡»  å¦‚æœæœ‰åˆ™è¡¨ç¤ºappå¼ºåˆ¶æ›´æ–°
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ‘çš„å‘½ä»¤å¦‚ä¸‹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push release Trip ./ios/bundle/index.ios.jsbundle 1.0.0 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆåŠŸåé‡å¯app åˆ™ä¼šçœ‹åˆ°æ›´æ–°ï¼ˆæ˜¯é‡å¯app éœ€è¦ç»“æŸç¨‹åºåå†æ‰“å¼€ï¼‰&lt;/p&gt;

&lt;p&gt;cocoapodsç”¨æ¥ç®¡ç†ä¾èµ–ï¼Œç±»ä¼¼å‰ç«¯çš„bower&lt;/p&gt;

&lt;p&gt;ä¸€èˆ¬ä¸€åˆ†é’ŸæˆåŠŸ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo gem install cocoapods

å¦‚æœæŠ¥é”™

ERROR:  While executing gem ... (Gem::DependencyError)
Unable to resolve dependencies: cocoapods requires cocoapods-core (= 1.1.1), cocoapods-downloader (&amp;lt; 2.0, &amp;gt;= 1.1.2), cocoapods-trunk (&amp;lt; 2.0, &amp;gt;= 1.1.1), xcodeproj (&amp;lt; 2.0, &amp;gt;= 1.3.3)

å°è¯•è¿è¡Œ

sudo gem install cocoapods --pre 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content><summary type="html">æœ¬æ–‡ä½¿ç”¨çš„æ˜¯ å¾®è½¯codepush cloud æœåŠ¡ã€‚</summary></entry><entry><title type="html">react native codepushä¹‹æ­å»ºè‡ªå·±çš„æ›´æ–°æœåŠ¡å™¨</title><link href="http://localhost:4000/jekyll/update/2016/01/19/cudepush-server.html" rel="alternate" type="text/html" title="react native codepushä¹‹æ­å»ºè‡ªå·±çš„æ›´æ–°æœåŠ¡å™¨" /><published>2016-01-19T11:36:34+08:00</published><updated>2016-01-19T11:36:34+08:00</updated><id>http://localhost:4000/jekyll/update/2016/01/19/cudepush-server</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2016/01/19/cudepush-server.html">&lt;p&gt;&lt;a href=&quot;https://github.com/lisong/code-push-server&quot;&gt;å‚è€ƒæ–‡ç« -code-push-server&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ„Ÿè°¢ä¸Šæ–‡ä½œè€…çš„è¾›è‹¦ä»˜å‡º&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡ç®€å†åœ¨å·²ç»æˆåŠŸè¿è¡Œ å¾®è½¯ codepushçƒ­æ›´æ–°ï¼Œå¹¶ä¸”äº†è§£codepush ç›¸å…³æŒ‡ä»¤çš„åŸºç¡€ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/19f23d66286f&quot;&gt;å‚è€ƒæ–‡ç« -iOS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/eafe0136d3a3&quot;&gt;å‚è€ƒæ–‡ç« -android&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;ç®€ä»‹&quot;&gt;ç®€ä»‹&lt;/h4&gt;
&lt;p&gt;code-push-serveræ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒåŸºäº nodejs + mysql æ­å»ºè‡ªå·±çš„çƒ­æ›´æ–°æœåŠ¡å™¨&lt;/p&gt;

&lt;h4 id=&quot;ç¯å¢ƒ&quot;&gt;ç¯å¢ƒ&lt;/h4&gt;

&lt;p&gt;macOS Sierra 10.12.1&lt;/p&gt;

&lt;p&gt;nodejs v4.3.1&lt;/p&gt;

&lt;p&gt;mysql 5.6&lt;/p&gt;

&lt;h4 id=&quot;ä¸€å®‰è£…mysqlå…¶ä»–ç¯å¢ƒè‡ªè¡Œå¯¹åº”mysqlå®‰è£…&quot;&gt;ä¸€ã€å®‰è£…mysqlï¼ˆå…¶ä»–ç¯å¢ƒè‡ªè¡Œå¯¹åº”mysqlå®‰è£…ï¼‰&lt;/h4&gt;

&lt;p&gt;æ¨èå®‰è£… &lt;code class=&quot;highlighter-rouge&quot;&gt;mysql 5.6&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://dev.mysql.com/downloads/mysql/5.6.html#downloads&quot;&gt;mysql 5.6ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä¸€é”®å®‰è£… æ¯«æ— å‹åŠ›&lt;/p&gt;

&lt;h5 id=&quot;è®¾ç½®mysqlå¯†ç &quot;&gt;è®¾ç½®mysqlå¯†ç &lt;/h5&gt;

&lt;p&gt;è¿›å…¥mysqlå®‰è£…ç›®å½•ï¼Œå‘½ä»¤åˆ†æ­¥æ‰§è¡Œ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd /usr/local/mysql/bin

./mysql -u root -p  //è¿™ä¸€æ­¥æ˜¯ç™»å½•rootç”¨æˆ· å›è½¦å³å¯ï¼Œ5.6é»˜äººå¯†ç ä¸ºç©º

ä¿®æ”¹å¯†ç 

set password = password('è¾“å…¥ä½ çš„æ–°å¯†ç ');  //å¼•å·ä¸èƒ½çœç•¥
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h5 id=&quot;å¯åŠ¨mysqlæœåŠ¡&quot;&gt;å¯åŠ¨mysqlæœåŠ¡&lt;/h5&gt;

&lt;p&gt;æ‰“å¼€ ç³»ç»Ÿè®¾ç½®ï¼Œåœ¨é¢æ¿ä¸‹ä¼šå‡ºç°ä¸€ä¸ªmysqlçš„å›¾æ ‡ï¼Œç‚¹å‡»è¿›å…¥å¹¶å¯åŠ¨å³å¯ã€‚&lt;/p&gt;

&lt;image src=&quot;http://ok0ekjrod.bkt.clouddn.com/mysql.jpeg&quot;&gt;&lt;/image&gt;

&lt;h4 id=&quot;äºŒæœ¬åœ°å®‰è£…code-push-serve&quot;&gt;äºŒã€æœ¬åœ°å®‰è£…code-push-serve&lt;/h4&gt;

&lt;p&gt;ä½œè€…å‘å¸ƒäº†ä¸¤ç§å®‰è£…æ–¹å¼ï¼ˆnpmå®‰è£…æˆ–æºç å®‰è£…ï¼‰ï¼Œåœ¨æ­¤æˆ‘æ¨èä½¿ç”¨æºç å®‰è£…ï¼Œå› ä¸ºåæœŸæˆ‘ä»¬è¦åŸºäºè¿™ä¸ªæœåŠ¡ä¿®æ”¹è‡ªå·±çš„ç½‘é¡µï¼Œæºç å®‰è£…æ–¹ä¾¿äº›ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆè¿›å…¥é¡¹ç›®å‡†å¤‡å®‰è£…çš„ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆå¦‚æœæ²¡æœ‰å®‰è£…git åˆ™å¯ä»¥å»gitä¸Šdownloadä¸‹æ¥è§£å‹ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/lisong/code-push-server.git
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;cloneå®Œæ¯•åæ‰§è¡Œ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd code-push-server &amp;amp;&amp;amp; npm install
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¿®æ”¹&lt;code class=&quot;highlighter-rouge&quot;&gt;config/config.js&lt;/code&gt; æ–‡ä»¶ï¼Œåœ¨ &lt;strong&gt;db&lt;/strong&gt; å¯¹è±¡ä¸­æ·»åŠ æ•°æ®åº“ä¿¡æ¯ï¼Œå‚è€ƒå¦‚ä¸‹é…ç½®ï¼Œå¯¹åº”è‡ªå·±çš„ç”¨æˆ·åå¯†ç ï¼Œæ•°æ®åº“åç§°&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;db: {
    username: &quot;root&quot;,	//
    password: &quot;123456&quot;,
    database: &quot;codepush&quot;,
    host: &quot;127.0.0.1&quot;,
    port: 3306,
    dialect: &quot;mysql&quot;
  }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åˆå§‹åŒ–æœåŠ¡ï¼Œé¡¹ç›®æ ¹ç›®å½•ï¼ˆcode-push-serverï¼‰ä¸‹æ‰§è¡Œå‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./bin/db init --dbhost localhost --dbuser root --dbpassword #åˆå§‹åŒ–mysqlæ•°æ®åº“
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸Šè¿°æ— æŠ¥é”™å³å¯è¿›è¡Œä¸‹ä¸€æ­¥&lt;/p&gt;

&lt;h4 id=&quot;ä¸‰é…ç½®æœåŠ¡å™¨-å­˜å‚¨åœ¨æœ¬åœ°&quot;&gt;ä¸‰ã€é…ç½®æœåŠ¡å™¨-å­˜å‚¨åœ¨æœ¬åœ°&lt;/h4&gt;

&lt;p&gt;ä¿®æ”¹&lt;code class=&quot;highlighter-rouge&quot;&gt;config/config.js&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;å°† &lt;strong&gt;common&lt;/strong&gt; å¯¹è±¡ä¸­çš„ &lt;strong&gt;storageType&lt;/strong&gt;æ”¹ä¸º &lt;strong&gt;local&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ–°å»ºæ–‡ä»¶å­˜å‚¨ç›®å½• &lt;code class=&quot;highlighter-rouge&quot;&gt;data&lt;/code&gt;ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;storage&lt;/code&gt;ï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;local: {
    //æ­¤åœ°å€ä¸ºä»¥ä¸Šæ–°å»ºçš„æ–‡ä»¶å¤¹ï¼Œè‡ªå·±å¯¹åº”è‡ªå·±çš„è·¯å¾„
    storageDir: &quot;/Users/luozhong/work/reactNative/server/storage&quot;,
    //ipåœ°å€æ”¹æˆè‡ªå·±è®¾å¤‡å¯¹åº”çš„ip è¿™æ˜¯ä¸‹è½½åœ°å€ 
    downloadUrl: &quot;http://192.168.201.113:3000/download&quot;
  }
  
 common: {
 		//æ­¤åœ°å€ä¸ºä»¥ä¸Šæ–°å»ºçš„æ–‡ä»¶å¤¹ï¼Œè‡ªå·±å¯¹åº”è‡ªå·±çš„è·¯å¾„
    dataDir: &quot;/Users/luozhong/work/reactNative/server/data&quot;,
    storageType: &quot;local&quot;	//é€‰æ‹©å­˜å‚¨ç±»å‹ï¼Œç›®å‰æ”¯æŒlocalå’Œqiniué…ç½®
  }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¯åŠ¨æœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./bin/www	//æ— æŠ¥é”™ä¿¡æ¯å³ä¸ºæ­£å¸¸å¯åŠ¨ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://127.0.0.1:3000æŸ¥çœ‹ï¼Œé»˜è®¤ç”¨æˆ·åå¯†ç æ˜¯ admin 123456
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;å››é¡¹ç›®ä¸æœåŠ¡å»ºç«‹é“¾æ¥&quot;&gt;å››ã€é¡¹ç›®ä¸æœåŠ¡å»ºç«‹é“¾æ¥&lt;/h4&gt;

&lt;p&gt;è¿›å…¥reactnative é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹å½“å‰æ˜¯å¦ç™»å½•ï¼Œå› ä¸ºæ˜¯æ–°æœåŠ¡ï¼Œæ‰€ä»¥è¦å…ˆä¿è¯æ²¡æœ‰åˆ«çš„è´¦å·æ­£åœ¨ç™»å½•&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; code-push whoami
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœæŠ¥é”™å¦‚ä¸‹ï¼Œè¡¨ç¤ºæ²¡æœ‰ç™»å½•&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[Error]  You are not currently logged in. Run the 'code-push login' command to authenticate with the CodePush server.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœæ²¡æœ‰æŠ¥é”™ å¹¶ä¸”æ˜¾ç¤ºé‚®ç®±è´¦å·ï¼Œåˆ™è¡¨ç¤ºå·²ç»ç™»å½•è´¦æˆ·ï¼Œåˆ™æˆ‘ä»¬è¦å…ˆæ³¨é”€å½“å‰è´¦å·&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push logout
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆåŠŸæ³¨é”€åæ‰§è¡Œç™»å½•æŒ‡ä»¤ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€æœ¬åœ°æœåŠ¡ç™»å½•é¡µé¢ï¼Œå‘½ä»¤è¡Œä¸­ä¼šæç¤ºè¾“å…¥key&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push login http://localhost:3000
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å…¥è´¦å·å’Œå¯†ç  &lt;code class=&quot;highlighter-rouge&quot;&gt;admin&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;123456&lt;/code&gt; ç™»å½•åç‚¹å‡»æŒ‰é’® &lt;code class=&quot;highlighter-rouge&quot;&gt;è·å–token&lt;/code&gt; å¹¶å¤åˆ¶tokenåˆ°å‘½ä»¤è¡Œä¸­ï¼Œå¹¶å›è½¦ç¡®è®¤&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Successfully logged-in. //æç¤ºæ­¤è¡¨ç¤ºç™»å½•æˆåŠŸ
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è‡³æ­¤æˆ‘ä»¬å·²ç»å°†codepushå’Œæˆ‘ä»¬è‡ªå»ºçš„æœåŠ¡å™¨å…³è”èµ·æ¥äº†.&lt;/p&gt;

&lt;h4 id=&quot;äº”æ³¨å†Œåº”ç”¨&quot;&gt;äº”ã€æ³¨å†Œåº”ç”¨&lt;/h4&gt;

&lt;p&gt;é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push app add Trip-ios	//é¡¹ç›®å+iOS/androidåç¼€
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;å…­é¡¹ç›®ä¸­ä¿®æ”¹å¯¹åº”çš„key&quot;&gt;å…­ã€é¡¹ç›®ä¸­ä¿®æ”¹å¯¹åº”çš„key&lt;/h4&gt;

&lt;p&gt;æŸ¥çœ‹key&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push deployment ls Trip-ios
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å°†&lt;code class=&quot;highlighter-rouge&quot;&gt;Staging &lt;/code&gt;å€¼ä¿®æ”¹åˆ°å¯¹åº”çš„iOSæˆ–å®‰å“é¡¹ç›®ä¸­å¹¶é‡æ–°æ‰“åŒ…å®‰è£…&lt;/p&gt;

&lt;h4 id=&quot;ä¸ƒå‘å¸ƒæ›´æ–°&quot;&gt;ä¸ƒã€å‘å¸ƒæ›´æ–°&lt;/h4&gt;

&lt;p&gt;è¿›å…¥é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¡¨ç¤ºæ‰“åŒ…å¹¶å‘å¸ƒï¼Œé»˜è®¤å‘å¸ƒåœ¨å¼€å‘ç¯å¢ƒ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; code-push release-react Trip-ios ios
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆåŠŸåå³å¯æ‰“å¼€appéªŒè¯ã€‚&lt;/p&gt;</content><summary type="html">å‚è€ƒæ–‡ç« -code-push-server</summary></entry><entry><title type="html">react native android çƒ­æ›´æ–°ï¼ˆçœŸæœºè¿è¡Œï¼Œæ‰“åŒ…æ–‡ä»¶ï¼Œä¸Šä¼  ï¼‰</title><link href="http://localhost:4000/jekyll/update/2016/01/19/android-cudepush.html" rel="alternate" type="text/html" title="react native android çƒ­æ›´æ–°ï¼ˆçœŸæœºè¿è¡Œï¼Œæ‰“åŒ…æ–‡ä»¶ï¼Œä¸Šä¼  ï¼‰" /><published>2016-01-19T11:36:34+08:00</published><updated>2016-01-19T11:36:34+08:00</updated><id>http://localhost:4000/jekyll/update/2016/01/19/android-cudepush</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2016/01/19/android-cudepush.html">&lt;h3 id=&quot;è¿è¡Œç¯å¢ƒ&quot;&gt;è¿è¡Œç¯å¢ƒ&lt;/h3&gt;

&lt;p&gt;macOS Sierra 10.12.1&lt;/p&gt;

&lt;p&gt;jdk 1.8.0_101&lt;/p&gt;

&lt;h3 id=&quot;æ‰“åŒ…-apk&quot;&gt;æ‰“åŒ… apk&lt;/h3&gt;

&lt;h4 id=&quot;ç”Ÿæˆç­¾åç§˜é’¥&quot;&gt;ç”Ÿæˆç­¾åç§˜é’¥&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;keytool &lt;/code&gt; javaè¯ä¹¦ç®¡ç†å·¥å…·&lt;/p&gt;

&lt;p&gt;ç›¸å…³å‚æ•°&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-genkey	//åœ¨ç”¨æˆ·ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªé»˜è®¤æ–‡ä»¶â€.keystoreâ€,è¿˜ä¼šäº§ç”Ÿä¸€ä¸ªmykeyçš„åˆ«åï¼Œmykeyä¸­åŒ…å«ç”¨æˆ·çš„å…¬é’¥ã€ç§é’¥å’Œè¯ä¹¦

-alias	//äº§ç”Ÿåˆ«å æ¯ä¸ªkeystoreéƒ½å…³è”è¿™ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„aliasï¼Œè¿™ä¸ªaliasé€šå¸¸ä¸åŒºåˆ†å¤§å°å†™

-keyalg	//æŒ‡å®šå¯†é’¥çš„ç®—æ³• (å¦‚ RSA DSAï¼Œé»˜è®¤å€¼ä¸ºï¼šDSA)

-keystore	//æŒ‡å®šå¯†é’¥åº“çš„åç§°(äº§ç”Ÿçš„å„ç±»ä¿¡æ¯å°†ä¸åœ¨.keystoreæ–‡ä»¶ä¸­)

-validity	//æŒ‡å®šåˆ›å»ºçš„è¯ä¹¦æœ‰æ•ˆæœŸå¤šå°‘å¤©(é»˜è®¤ 90)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç»ˆç«¯è¿›å…¥&lt;strong&gt;å·¥ç¨‹ç›®å½•&lt;/strong&gt;è¾“å…¥ç­¾åå‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ¡å‘½ä»¤ä¼šè¦æ±‚ä½ è¾“å…¥å¯†é’¥åº“ï¼ˆkeystoreï¼‰å’Œå¯¹åº”å¯†é’¥çš„å¯†ç ï¼Œç„¶åè®¾ç½®ä¸€äº›å‘è¡Œç›¸å…³çš„ä¿¡æ¯ã€‚æœ€åå®ƒä¼šç”Ÿæˆä¸€ä¸ªå«åšmy-release-key.keystoreçš„å¯†é’¥åº“æ–‡ä»¶&lt;/p&gt;

&lt;image src=&quot;http://ok0ecqynu.bkt.clouddn.com/sing1.jpeg&quot; /&gt;

&lt;p&gt;åœ¨è¿è¡Œä¸Šé¢è¿™æ¡è¯­å¥ä¹‹åï¼Œå¯†é’¥åº“é‡Œåº”è¯¥å·²ç»ç”Ÿæˆäº†ä¸€ä¸ªå•ç‹¬çš„å¯†é’¥ï¼Œæœ‰æ•ˆæœŸä¸º10000å¤©ã€‚â€“aliaså‚æ•°åé¢çš„åˆ«åæ˜¯ä½ å°†æ¥ä¸ºåº”ç”¨ç­¾åæ—¶æ‰€éœ€è¦ç”¨åˆ°çš„ï¼Œæ‰€ä»¥è®°å¾—è®°å½•è¿™ä¸ªåˆ«åã€‚&lt;/p&gt;

&lt;p&gt;ç§˜é’¥æ–‡ä»¶é»˜è®¤ç”Ÿåœ¨å½“å‰ç›®å½•ï¼ˆmacæ˜¯å¦‚æ­¤ï¼Œwindowsä¸æ¸…æ¥šï¼‰&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šè¯·è®°å¾—å¦¥å–„åœ°ä¿ç®¡å¥½ä½ çš„å¯†é’¥åº“æ–‡ä»¶ï¼Œä¸è¦ä¸Šä¼ åˆ°ç‰ˆæœ¬åº“æˆ–è€…å…¶å®ƒçš„åœ°æ–¹ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&quot;è®¾ç½®gradleå˜é‡&quot;&gt;è®¾ç½®gradleå˜é‡&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;å°†&lt;code class=&quot;highlighter-rouge&quot;&gt;my-release-key.keystore&lt;/code&gt;æ–‡ä»¶ï¼ˆæ ¹æ®è‡ªå·±å‘½åä¸åŒï¼‰ç§»åŠ¨åˆ°å·¥ç¨‹&lt;code class=&quot;highlighter-rouge&quot;&gt;android/app&lt;/code&gt;ä¸­&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç¼–è¾‘&lt;code class=&quot;highlighter-rouge&quot;&gt;/android/gradle.properties&lt;/code&gt;æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹çš„ä»£ç &lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; MYAPP_RELEASE_STORE_FILE=my-release-key.keystore
 MYAPP_RELEASE_KEY_ALIAS=my-key-alias
 MYAPP_RELEASE_STORE_PASSWORD=è¿™é‡Œå†™åˆšæ‰è¾“å…¥çš„å¯†ç 
 MYAPP_RELEASE_KEY_PASSWORD=è¿™é‡Œå†™åˆšæ‰è¾“å…¥çš„å¯†ç 
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸Šé¢çš„è¿™äº›ä¼šä½œä¸ºå…¨å±€çš„gradleå˜é‡ï¼Œåœ¨åé¢çš„æ­¥éª¤ä¸­å¯ä»¥ç”¨æ¥ç»™appç­¾åã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;ä¸€æ—¦ä½ åœ¨Play Storeå‘å¸ƒäº†ä½ çš„åº”ç”¨ï¼Œå¦‚æœæƒ³ä¿®æ”¹ç­¾åï¼Œå°±å¿…é¡»ç”¨ä¸€ä¸ªä¸åŒçš„åŒ…åæ¥é‡æ–°å‘å¸ƒä½ çš„åº”ç”¨ï¼ˆè¿™æ ·ä¹Ÿä¼šä¸¢å¤±æ‰€æœ‰çš„ä¸‹è½½æ•°å’Œè¯„åˆ†ï¼‰ã€‚æ‰€ä»¥è¯·åŠ¡å¿…å¤‡ä»½å¥½ä½ çš„å¯†é’¥åº“å’Œå¯†ç ã€‚&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&quot;æ·»åŠ ç­¾ååˆ°é¡¹ç›®çš„gradleé…ç½®æ–‡ä»¶&quot;&gt;æ·»åŠ ç­¾ååˆ°é¡¹ç›®çš„gradleé…ç½®æ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;æ‰“å¼€é¡¹ç›®ç›®å½•ä¸‹çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;android/app/build.gradle&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;strong&gt;android&lt;/strong&gt; å­—æ®µä¸­æ·»åŠ å¦‚ä¸‹ä»£ç &lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;signingConfigs {
    release {
        storeFile file(MYAPP_RELEASE_STORE_FILE)
        storePassword MYAPP_RELEASE_STORE_PASSWORD
        keyAlias MYAPP_RELEASE_KEY_ALIAS
        keyPassword MYAPP_RELEASE_KEY_PASSWORD
    }
}	
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;buildTypes&lt;/code&gt;å­—æ®µçš„&lt;code class=&quot;highlighter-rouge&quot;&gt;release &lt;/code&gt;ä¸­æ·»åŠ &lt;/p&gt;

 	signingConfig signingConfigs.release

&lt;p&gt;æ·»åŠ å¥½åå°±åƒä¸‹é¢ä»£ç çš„æ ·å­ï¼ˆçœç•¥å·è¡¨ç¤ºè¿˜æœ‰å…¶ä»–çš„é»˜è®¤ä»£ç ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;android {
   
    defaultConfig { ... }
    signingConfigs {
        release {
            storeFile file(MYAPP_RELEASE_STORE_FILE)
            storePassword MYAPP_RELEASE_STORE_PASSWORD
            keyAlias MYAPP_RELEASE_KEY_ALIAS
            keyPassword MYAPP_RELEASE_KEY_PASSWORD
        }
    }
    buildTypes {
        release {
            ...
            signingConfig signingConfigs.release
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;ç”Ÿæˆå‘è¡ŒapkåŒ…&quot;&gt;ç”Ÿæˆå‘è¡ŒAPKåŒ…&lt;/h4&gt;

&lt;p&gt;åœ¨é¡¹ç›®ä¸­&lt;code class=&quot;highlighter-rouge&quot;&gt;android &lt;/code&gt;ç›®å½•ä¸‹è¿è¡Œ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./gradlew assembleRelease
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;./gradlew assembleRelease&lt;/code&gt;è¡¨ç¤ºæ‰§è¡Œå½“å‰ç›®å½•ä¸‹çš„åä¸ºgradlewçš„è„šæœ¬æ–‡ä»¶ï¼Œè¿è¡Œå‚æ•°ä¸ºassembleRelease&lt;/p&gt;

&lt;p&gt;æœ€åapkæ–‡ä»¶ç”Ÿæˆåœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;android/app/build/outputs/&lt;/code&gt;æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘çš„å«åš &lt;strong&gt;app-release.apk&lt;/strong&gt;ï¼Œæ‹·è´åˆ°æ‰‹æœºä¸Šå³å¯å®‰è£…&lt;/p&gt;

&lt;h3 id=&quot;é›†æˆcodepushåˆ°å®‰å“é¡¹ç›®ä¸­&quot;&gt;é›†æˆcodepushåˆ°å®‰å“é¡¹ç›®ä¸­&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://microsoft.github.io/code-push/docs/react-native.html#link-5&quot;&gt;å‚è€ƒæ–‡æ¡£1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/Microsoft/react-native-code-push#android-setup&quot;&gt;å‚è€ƒæ–‡æ¡£2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;codepushæœ‰ä¸¤ç§æ–¹å¼å¯¼å…¥ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯&lt;a href=&quot;https://www.npmjs.com/package/rnpm&quot;&gt;rnpm&lt;/a&gt;çš„æ–¹å¼&lt;/p&gt;

&lt;h4 id=&quot;å®‰è£…rnpm&quot;&gt;å®‰è£…rnpm&lt;/h4&gt;

&lt;p&gt;ç»ˆç«¯è¾“å…¥&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm i -g rnpm
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;å¯¼å…¥é…ç½®åˆ°é¡¹ç›®ä¸­&quot;&gt;å¯¼å…¥é…ç½®åˆ°é¡¹ç›®ä¸­&lt;/h4&gt;

&lt;p&gt;è¿›å…¥é¡¹ç›®ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;android&lt;/code&gt;æ–‡ä»¶å¤¹è¿è¡Œå‘½ä»¤å¯¼å…¥é…ç½®&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rnpm link react-native-code-push
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¿®æ”¹&lt;code class=&quot;highlighter-rouge&quot;&gt;android/settings.gradle&lt;/code&gt;æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆè²Œä¼¼æ’ä»¶å¯¼å…¥åä¼šè‡ªåŠ¨æ·»åŠ è¿›å…¥ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;include ':app', ':react-native-code-push'
project(':react-native-code-push').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-code-push/android/app')
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¿®æ”¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;android/app/build.gradle&lt;/code&gt;æ–‡ä»¶ ï¼ˆè²Œä¼¼ä¹Ÿä¼šè‡ªåŠ¨æ·»åŠ ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;...
dependencies {
    ...
    compile project(':react-native-code-push')
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç»§ç»­ä¿®æ”¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;android/app/build.gradle&lt;/code&gt;æ–‡ä»¶ ï¼Œæ·»åŠ ä»£ç ï¼ˆè²Œä¼¼è¿˜æ˜¯ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apply from: &quot;../../node_modules/react-native/react.gradle&quot;
apply from: &quot;../../node_modules/react-native-code-push/android/codepush.gradle&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æŸ¥çœ‹codepush éƒ¨ç½²ç§˜é’¥ï¼Œæ‹·è´å‡ºå¯¹åº”ç¯å¢ƒçš„ key ï¼ˆè¿™ç‚¹å¾ˆé‡è¦ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push deployment ls &amp;lt;appName&amp;gt; --displayKeys
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¿®æ”¹&lt;code class=&quot;highlighter-rouge&quot;&gt;android/app/src/java/com/å·¥ç¨‹å/MainApplication.java&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;

&lt;p&gt;React Native ç‰ˆæœ¬ &amp;gt;= v0.29 æ·»åŠ ä»£ç å¦‚ä¸‹æ ·å­ï¼ˆåœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;node_modules/react-native/package.json&lt;/code&gt;ä¸­æŸ¥çœ‹ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import com.microsoft.codepush.react.CodePush;

public class MainApplication extends Application implements ReactApplication {

    private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {
       
        @Override
        protected String getJSBundleFile() {
            return CodePush.getJSBundleFile();
        }

        @Override
        protected List&amp;lt;ReactPackage&amp;gt; getPackages() {
           it, you can run &quot;code-push deployment ls &amp;lt;appName&amp;gt; -k&quot; to retrieve your key.
            return Arrays.&amp;lt;ReactPackage&amp;gt;asList(
                new MainReactPackage(),
                new CodePush(&quot;è¿™é‡Œå¡«ä¸Šæ–‡çš„ key &quot;, MainApplication.this, BuildConfig.DEBUG)
            );
        }
    };
}	
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¿®æ”¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;android/app/build.gradle&lt;/code&gt; æ–‡ä»¶ ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;versionName &lt;/code&gt; æ”¹ä¸º 1.0.0ï¼ˆéšä¾¿æ”¹æˆå•¥ï¼Œä½†æ ¼å¼éœ€è¦è¿™æ ·çš„ï¼Œè‡ªè¡Œæ ¹æ®å½“å‰ç‰ˆæœ¬ä¿®æ”¹ï¼‰ï¼Œå› ä¸º &lt;strong&gt;codepush&lt;/strong&gt;éœ€è¦ä¸‰ä½&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;android{
    defaultConfig{
        versionName &quot;1.0.0&quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç¼–è¾‘ &lt;code class=&quot;highlighter-rouge&quot;&gt;android/index.android.js&lt;/code&gt;æ–‡ä»¶ï¼Œæ·»åŠ codepushä»£ç &lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import codePush from &quot;react-native-code-push&quot;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨ çˆ¶ç»„ä»¶çš„&lt;strong&gt;componentDidMount&lt;/strong&gt; æ–¹æ³•ä¸­è°ƒç”¨çƒ­æ›´æ–°æ–¹æ³•&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;componentDidMount(){
    codePush.sync();
  }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;react-native-æ‰“åŒ…-bundle-æ–‡ä»¶&quot;&gt;react native æ‰“åŒ… bundle æ–‡ä»¶&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/facebook/react-native/blob/master/local-cli/bundle/bundleCommandLineArgs.js&quot;&gt;ç›¸å…³å‘½ä»¤&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;react-native bundle
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¸¸ç”¨å‚æ•°è§£é‡Š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;--entry-file //iosæˆ–androidå…¥å£çš„æ–‡ä»¶åç§°ï¼Œä¸€èˆ¬å« index.ios.jsæˆ– index.android.js

--platform //å¹³å°åç§°(ios/android)

--dev //è®¾ç½®ä¸ºfalseçš„æ—¶å€™ä¼šå¯¹JavaScriptä»£ç è¿›è¡Œä¼˜åŒ–å¤„ç†ã€‚

--bundle-output //ç”Ÿæˆçš„jsbundleæ–‡ä»¶çš„åç§°(åŒ…å«è·¯å¾„)ï¼Œæ¯”å¦‚./ios/bundle/index.ios.jsbundle

--assets-dest //å›¾ç‰‡ä»¥åŠå…¶ä»–èµ„æºå­˜æ”¾çš„ç›®å½•,æ¯”å¦‚./ios/assets
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ‘çš„æ‰“åŒ…å‘½ä»¤å¦‚ä¸‹ï¼Œæˆ‘çš„é™æ€èµ„æºæ”¾åˆ° ios/Trip/assets ä¸­çš„ï¼ˆä¾ç…§ä¸ªäººçš„è·¯å¾„ä¸ºå‡†ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;ç‰¹åˆ«æ³¨æ„ï¼šbundle æ–‡ä»¶å¤¹ éœ€è¦äº‹å…ˆæ‰‹åŠ¨å»ºå¥½&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;react-native bundle --entry-file index.android.js --platform android --dev false --bundle-output ./android/bundle/index.android.jsbundle --assets-dest ./android/assets
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ­¤æ—¶æˆåŠŸä¼šåœ¨&lt;strong&gt;&lt;em&gt;ios&lt;/em&gt;&lt;/strong&gt;ç›®å½•ä¸‹çœ‹åˆ°ä¸€ä¸ª&lt;strong&gt;&lt;em&gt;bundle&lt;/em&gt;&lt;/strong&gt;ç›®å½•ï¼Œé‡Œé¢æ˜¯æˆ‘ä»¬çš„æ‰“åŒ…æ–‡ä»¶&lt;/p&gt;

&lt;h3 id=&quot;å‘codepushå‘å¸ƒæ‰“åŒ…ä»£ç &quot;&gt;å‘codepushå‘å¸ƒæ‰“åŒ…ä»£ç &lt;/h3&gt;

&lt;p&gt;éšæ„ä¿®æ”¹ä»£ç ï¼Œä½¿å…¶è¡¨ç°å’Œæ‰‹æœºä¸Šæ˜¾ç¤ºä¸ä¸€è‡´å³å¯&lt;/p&gt;

&lt;p&gt;ç„¶åé‡æ–°æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„bundleæ–‡ä»¶&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œcodepushçš„å‘å¸ƒå‘½ä»¤ï¼Œå°†æ–°æ–‡ä»¶å‘å¸ƒåˆ°&lt;strong&gt;&lt;em&gt;staging&lt;/em&gt;&lt;/strong&gt; ç¯å¢ƒä¸­&lt;/p&gt;

&lt;p&gt;ç›¸å…³å‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push release &amp;lt;appName&amp;gt; &amp;lt;updateContents&amp;gt; &amp;lt;targetBinaryVersion&amp;gt; --mandatory //å‘å¸ƒ

code-push deployment history Trip Staging  //æŸ¥è¯¢å‘å¸ƒå†å²
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å‚æ•°è§£é‡Š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;appName&amp;gt; //appåç§°

&amp;lt;updateContents&amp;gt; //Bundleæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼ˆå®Œæ•´ï¼‰

&amp;lt;targetBinaryVersion&amp;gt;	// éœ€è¦çƒ­æ›´çš„app ç‰ˆæœ¬

--mandatory //æ­¤å‚æ•°éå¿…é¡»  å¦‚æœæœ‰åˆ™è¡¨ç¤ºappå¼ºåˆ¶æ›´æ–°
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ‘çš„å‘½ä»¤å¦‚ä¸‹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;code-push release TripAnd ./android/bundle/index.android.jsbundle 1.0.0 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆåŠŸåé‡å¯app åˆ™ä¼šçœ‹åˆ°æ›´æ–°ï¼ˆæ˜¯é‡å¯app éœ€è¦ç»“æŸç¨‹åºåå†æ‰“å¼€ï¼‰&lt;/p&gt;</content><summary type="html">è¿è¡Œç¯å¢ƒ</summary></entry></feed>
